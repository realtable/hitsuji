#!/usr/bin/env ruby

HELP = 'Usage: hitsuji <command>

where <command> is one of:
  evaluate                      Evaluates hitsuji file to JSON

hitsuji help <command>          Display specific help for a command
hitsuji -h, --help              Display this help page
hitsuji -v, --version           Show the installed version number
'.freeze

VERSION = 'Hitsuji v0.1.2 @ '.freeze + File.expand_path(__FILE__)

def parse_commands
  extra_args = ARGV[1..-1].join(' ') if ARGV[1..-1]

  case ARGV[0]
  when 'help'
    command = 'ruby -Ilib ' + __dir__ + '/commands/help ' + extra_args
  when 'evaluate'
    command = 'ruby -Ilib ' + __dir__ + '/commands/evaluate ' + extra_args
  end

  exec command
end

def parse
  case ARGV[0]
  when '-h', '--help', nil
    puts HELP
  when '-v', '--version'
    puts VERSION
  else
    parse_commands
  end
end

parse
